import{computed as e,inject as t}from"vue";var r={exports:{}},n=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}},i=n,s=Object.prototype.toString;function o(e){return"[object Array]"===s.call(e)}function a(e){return void 0===e}function p(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==s.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===s.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var d={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===s.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:p,isPlainObject:l,isUndefined:a,isDate:function(e){return"[object Date]"===s.call(e)},isFile:function(e){return"[object File]"===s.call(e)},isBlob:function(e){return"[object Blob]"===s.call(e)},isFunction:u,isStream:function(e){return p(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function e(){var t={};function r(r,n){l(t[n])&&l(r)?t[n]=e(t[n],r):l(r)?t[n]=e({},r):o(r)?t[n]=r.slice():t[n]=r}for(var n=0,i=arguments.length;n<i;n++)c(arguments[n],r);return t},extend:function(e,t,r){return c(t,(function(t,n){e[n]=r&&"function"==typeof t?i(t,r):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}},m=d;function h(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var f=function(e,t,r){if(!t)return e;var n;if(r)n=r(t);else if(m.isURLSearchParams(t))n=t.toString();else{var i=[];m.forEach(t,(function(e,t){null!=e&&(m.isArray(e)?t+="[]":e=[e],m.forEach(e,(function(e){m.isDate(e)?e=e.toISOString():m.isObject(e)&&(e=JSON.stringify(e)),i.push(h(t)+"="+h(e))})))})),n=i.join("&")}if(n){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e},g=d;function v(){this.handlers=[]}v.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},v.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},v.prototype.forEach=function(e){g.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var F=v,E=d,T=function(e,t,r,n,i){return e.config=t,r&&(e.code=r),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},y=T,_=function(e,t,r,n,i){var s=new Error(e);return y(s,t,r,n,i)},w=_,b=d,N=b.isStandardBrowserEnv()?{write:function(e,t,r,n,i,s){var o=[];o.push(e+"="+encodeURIComponent(t)),b.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),b.isString(n)&&o.push("path="+n),b.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},k=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},S=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},R=d,x=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],I=d,O=I.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=I.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0},C=d,D=function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(w("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)},j=N,L=f,A=function(e,t){return e&&!k(t)?S(e,t):t},$=function(e){var t,r,n,i={};return e?(R.forEach(e.split("\n"),(function(e){if(n=e.indexOf(":"),t=R.trim(e.substr(0,n)).toLowerCase(),r=R.trim(e.substr(n+1)),t){if(i[t]&&x.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([r]):i[t]?i[t]+", "+r:r}})),i):i},U=O,P=_,z=function(e){return new Promise((function(t,r){var n=e.data,i=e.headers,s=e.responseType;C.isFormData(n)&&delete i["Content-Type"];var o=new XMLHttpRequest;if(e.auth){var a=e.auth.username||"",p=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.Authorization="Basic "+btoa(a+":"+p)}var l=A(e.baseURL,e.url);function u(){if(o){var n="getAllResponseHeaders"in o?$(o.getAllResponseHeaders()):null,i={data:s&&"text"!==s&&"json"!==s?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:n,config:e,request:o};D(t,r,i),o=null}}if(o.open(e.method.toUpperCase(),L(l,e.params,e.paramsSerializer),!0),o.timeout=e.timeout,"onloadend"in o?o.onloadend=u:o.onreadystatechange=function(){o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))&&setTimeout(u)},o.onabort=function(){o&&(r(P("Request aborted",e,"ECONNABORTED",o)),o=null)},o.onerror=function(){r(P("Network Error",e,null,o)),o=null},o.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(P(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",o)),o=null},C.isStandardBrowserEnv()){var c=(e.withCredentials||U(l))&&e.xsrfCookieName?j.read(e.xsrfCookieName):void 0;c&&(i[e.xsrfHeaderName]=c)}"setRequestHeader"in o&&C.forEach(i,(function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete i[t]:o.setRequestHeader(t,e)})),C.isUndefined(e.withCredentials)||(o.withCredentials=!!e.withCredentials),s&&"json"!==s&&(o.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&o.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){o&&(o.abort(),r(e),o=null)})),n||(n=null),o.send(n)}))},V=d,q=function(e,t){E.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))},M=T,B={"Content-Type":"application/x-www-form-urlencoded"};function H(e,t){!V.isUndefined(e)&&V.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var J,W={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(J=z),J),transformRequest:[function(e,t){return q(t,"Accept"),q(t,"Content-Type"),V.isFormData(e)||V.isArrayBuffer(e)||V.isBuffer(e)||V.isStream(e)||V.isFile(e)||V.isBlob(e)?e:V.isArrayBufferView(e)?e.buffer:V.isURLSearchParams(e)?(H(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):V.isObject(e)||t&&"application/json"===t["Content-Type"]?(H(t,"application/json"),function(e,t,r){if(V.isString(e))try{return(t||JSON.parse)(e),V.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,r=t&&t.silentJSONParsing,n=t&&t.forcedJSONParsing,i=!r&&"json"===this.responseType;if(i||n&&V.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw M(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};W.headers={common:{Accept:"application/json, text/plain, */*"}},V.forEach(["delete","get","head"],(function(e){W.headers[e]={}})),V.forEach(["post","put","patch"],(function(e){W.headers[e]=V.merge(B)}));var X=W,K=d,G=X,Z=function(e){return!(!e||!e.__CANCEL__)},Q=d,Y=function(e,t,r){var n=this||G;return K.forEach(r,(function(r){e=r.call(n,e,t)})),e},ee=Z,te=X;function re(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var ne=d,ie=function(e,t){t=t||{};var r={},n=["url","method","data"],i=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function a(e,t){return ne.isPlainObject(e)&&ne.isPlainObject(t)?ne.merge(e,t):ne.isPlainObject(t)?ne.merge({},t):ne.isArray(t)?t.slice():t}function p(n){ne.isUndefined(t[n])?ne.isUndefined(e[n])||(r[n]=a(void 0,e[n])):r[n]=a(e[n],t[n])}ne.forEach(n,(function(e){ne.isUndefined(t[e])||(r[e]=a(void 0,t[e]))})),ne.forEach(i,p),ne.forEach(s,(function(n){ne.isUndefined(t[n])?ne.isUndefined(e[n])||(r[n]=a(void 0,e[n])):r[n]=a(void 0,t[n])})),ne.forEach(o,(function(n){n in t?r[n]=a(e[n],t[n]):n in e&&(r[n]=a(void 0,e[n]))}));var l=n.concat(i).concat(s).concat(o),u=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return ne.forEach(u,p),r},se={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]},oe={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){oe[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));var ae={},pe=se.version.split(".");function le(e,t){for(var r=t?t.split("."):pe,n=e.split("."),i=0;i<3;i++){if(r[i]>n[i])return!0;if(r[i]<n[i])return!1}return!1}oe.transitional=function(e,t,r){var n=t&&le(t);function i(e,t){return"[Axios v"+se.version+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,s,o){if(!1===e)throw new Error(i(s," has been removed in "+t));return n&&!ae[s]&&(ae[s]=!0,console.warn(i(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,s,o)}};var ue={isOlderVersion:le,assertOptions:function(e,t,r){if("object"!=typeof e)throw new TypeError("options must be an object");for(var n=Object.keys(e),i=n.length;i-- >0;){var s=n[i],o=t[s];if(o){var a=e[s],p=void 0===a||o(a,s,e);if(!0!==p)throw new TypeError("option "+s+" must be "+p)}else if(!0!==r)throw Error("Unknown option "+s)}},validators:oe},ce=d,de=f,me=F,he=function(e){return re(e),e.headers=e.headers||{},e.data=Y.call(e,e.data,e.headers,e.transformRequest),e.headers=Q.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Q.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||te.adapter)(e).then((function(t){return re(e),t.data=Y.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return ee(t)||(re(e),t&&t.response&&(t.response.data=Y.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},fe=ie,ge=ue,ve=ge.validators;function Fe(e){this.defaults=e,this.interceptors={request:new me,response:new me}}Fe.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=fe(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&ge.assertOptions(t,{silentJSONParsing:ve.transitional(ve.boolean,"1.0.0"),forcedJSONParsing:ve.transitional(ve.boolean,"1.0.0"),clarifyTimeoutError:ve.transitional(ve.boolean,"1.0.0")},!1);var r=[],n=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(n=n&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));var i,s=[];if(this.interceptors.response.forEach((function(e){s.push(e.fulfilled,e.rejected)})),!n){var o=[he,void 0];for(Array.prototype.unshift.apply(o,r),o=o.concat(s),i=Promise.resolve(e);o.length;)i=i.then(o.shift(),o.shift());return i}for(var a=e;r.length;){var p=r.shift(),l=r.shift();try{a=p(a)}catch(e){l(e);break}}try{i=he(a)}catch(e){return Promise.reject(e)}for(;s.length;)i=i.then(s.shift(),s.shift());return i},Fe.prototype.getUri=function(e){return e=fe(this.defaults,e),de(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},ce.forEach(["delete","get","head","options"],(function(e){Fe.prototype[e]=function(t,r){return this.request(fe(r||{},{method:e,url:t,data:(r||{}).data}))}})),ce.forEach(["post","put","patch"],(function(e){Fe.prototype[e]=function(t,r,n){return this.request(fe(n||{},{method:e,url:t,data:r}))}}));var Ee=Fe;function Te(e){this.message=e}Te.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Te.prototype.__CANCEL__=!0;var ye=Te,_e=ye;function we(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new _e(e),t(r.reason))}))}we.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},we.source=function(){var e;return{token:new we((function(t){e=t})),cancel:e}};var be=we,Ne=d,ke=n,Se=Ee,Re=ie;function xe(e){var t=new Se(e),r=ke(Se.prototype.request,t);return Ne.extend(r,Se.prototype,t),Ne.extend(r,t),r}var Ie=xe(X);Ie.Axios=Se,Ie.create=function(e){return xe(Re(Ie.defaults,e))},Ie.Cancel=ye,Ie.CancelToken=be,Ie.isCancel=Z,Ie.all=function(e){return Promise.all(e)},Ie.spread=function(e){return function(t){return e.apply(null,t)}},Ie.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError},r.exports=Ie,r.exports.default=Ie;var Oe=r.exports;const Ce={all:De=De||new Map,on:function(e,t){var r=De.get(e);r?r.push(t):De.set(e,[t])},off:function(e,t){var r=De.get(e);r&&(t?r.splice(r.indexOf(t)>>>0,1):De.set(e,[]))},emit:function(e,t){var r=De.get(e);r&&r.slice().map((function(e){e(t)})),(r=De.get("*"))&&r.slice().map((function(r){r(e,t)}))}};var De;const je={$on:(...e)=>Ce.on(...e),$once:(...e)=>Ce.once(...e),$off:(...e)=>Ce.off(...e),$emit:(...e)=>Ce.emit(...e)},Le={props:["props","params","matestack-ui-vuejs-ref"],computed:{vc:function(){return this}},methods:{getRefs:function(){var e={},t=this.props.component_uid,r=this.getTemplateElement().querySelectorAll("[matestack-ui-vuejs-ref]");for(let n in r){let i=r[n];if(i.getAttribute){let r=i.getAttribute("matestack-ui-vuejs-ref");r.startsWith(t)&&(e[r.replace(t+"-","")]=i)}}return e},getTemplateElement:function(){return document.getElementById("uid-"+this.props.component_uid)},getElement:function(){return this.getTemplateElement().firstChild},emitEvents:function(e,t={}){if(null!=e){e.split(",").forEach((e=>je.$emit(e.trim(),t)))}},registerEvents:function(e,t){null!=e&&e.split(",").forEach((e=>je.$on(e.trim(),t)))},removeEvents:function(e,t){null!=e&&e.split(",").forEach((e=>je.$off(e.trim(),t)))},emitScopedEvent:function(e,t={}){je.$emit(this.props.component_uid+"_"+e,t)},registerScopedEvent:function(e,t,r=this.props.component_uid){je.$on(r+"_"+e,t)},removeScopedEvent:function(e,t,r=this.props.component_uid){je.$off(r+"_"+e,t)},getXcsrfToken:function(){if(document.getElementsByName("csrf-token")[0])return document.getElementsByName("csrf-token")[0].getAttribute("content")}}},Ae={inlineTemplate:'<slot :vc="vc"></slot>'},$e={mixins:[Le],template:Ae.inlineTemplate,props:["appConfig","params"],data:function(){return{pageTemplate:null,pageLoading:!1,currentPathName:document.location.pathname,currentSearch:document.location.search,currentOrigin:document.location.origin}},provide:function(){return{pageTemplate:e((()=>this.pageTemplate)),pageLoading:e((()=>this.pageLoading)),currentPathName:e((()=>this.currentPathName)),currentSearch:e((()=>this.currentSearch)),currentOrigin:e((()=>this.currentOrigin)),appNavigateTo:this.navigateTo,setPageLoading:this.setPageLoading}},mounted:function(){const e=this;window.addEventListener("popstate",(t=>{this.isNavigatingToAnotherPage({origin:e.currentOrigin,pathName:e.currentPathName,search:e.currentSearch},document.location)&&(je.$emit("page_loading_triggered",document.location.pathname+document.location.search),e.pageLoading=!0,e.navigateTo({url:document.location.pathname+document.location.search,backwards:!0}))}))},methods:{navigateTo({url:e,backwards:t}){const r=this;if(r.pageLoading=!0,je.$emit("page_loading",e),window.history.pushState)return new Promise(((n,i)=>{Oe({method:"get",url:e,headers:{"X-CSRF-Token":r.getXcsrfToken()},params:{only_page:!0}}).then((function(i){t?window.history.replaceState({matestackApp:!0,url:e},null,e):window.history.pushState({matestackApp:!0,url:e},null,e),setTimeout((function(){n(i.data),r.pageTemplate=i.data,r.setCurrentLocation({path:e.split("?")[0],search:document.location.search,origin:document.location.origin}),r.pageLoading=!1,r.pageScrollTop(),je.$emit("page_loaded",e)}),5)})).catch((function(e){setTimeout((function(){n(e),je.$emit("page_loading_error",e)}),5)}))}));document.location.href=e},setPageLoading(e){this.pageLoading=e},setCurrentLocation(e){this.currentPathName=e.path,this.currentSearch=e.search,this.currentOrigin=e.origin},pageScrollTop(){const e=function(t){return null==t?null:t.scrollHeight>t.clientHeight?t:e(t.parentNode)};var t=e(document.getElementsByClassName("matestack-page-root")[0]);t&&(t.scrollTop=0)},isNavigatingToAnotherPage:(e,t)=>e.pathName!==t.pathname||e.origin!==t.origin||e.search!==t.search}},Ue={mixins:[Le],template:Ae.inlineTemplate,data:function(){return{}},inject:["pageTemplate","pageLoading"],computed:{asyncPageTemplate:function(){return this.pageTemplate},loading:function(){return this.pageLoading}}},Pe={template:'<component :is="dynamicComponent" :vc="vc" :template="template" />',props:["vc","template"],computed:{dynamicComponent:function(){return{props:["vc","template"],template:`${this.template||"<div></div>"}`}}}};var ze=(e,t,r)=>{r||(r=window.location.href);let n,i=new RegExp(`([?&])${e}=.*?(&|#|$)(.*)`,"gi");if(i.test(r))return null!=t?r.replace(i,`$1${e}=${t}$2$3`):(n=r.split("#"),r=n[0].replace(i,"$1$3").replace(/(&|\?)$/,""),void 0!==n[1]&&null!==n[1]&&(r+=`#${n[1]}`),r);if(null!=t){const i=-1!==r.indexOf("?")?"&":"?";return n=r.split("#"),r=`${n[0]}${i}${e}=${t}`,void 0!==n[1]&&null!==n[1]&&(r+=`#${n[1]}`),r}return r},Ve=(e,t)=>{t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");const r=new RegExp(`[?&]${e}(=([^&#]*)|&|#|$)`).exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null},qe=()=>{const e=window.location.search.substring(1);if(0===e.length)return{};return JSON.parse(`{"${e.replace(/&/g,'","').replace(/=/g,'":"')}"}`,((e,t)=>""===e?t:decodeURIComponent(t)))};const Me={mixins:[Le],template:Ae.inlineTemplate,data:function(){return{currentLimit:null,currentOffset:null,currentFilteredCount:null,currentBaseCount:null}},methods:{next:function(){if(this.currentTo()<this.currentCount()){this.currentOffset+=this.currentLimit;var e=ze(this.props.id+"-offset",this.currentOffset);window.history.pushState({matestackApp:!0,url:e},null,e),je.$emit(this.props.id+"-update")}},previous:function(){if(-1*(this.currentOffset-this.currentLimit)!=this.currentLimit){this.currentOffset-this.currentLimit<0?this.currentOffset=0:this.currentOffset-=this.currentLimit;var e=ze(this.props.id+"-offset",this.currentOffset);window.history.pushState({matestackApp:!0,url:e},null,e),je.$emit(this.props.id+"-update")}},currentTo:function(){var e=parseInt(this.currentOffset)+parseInt(this.currentLimit);return e>parseInt(this.currentCount())?this.currentCount():e},currentCount:function(){return null!=this.currentFilteredCount||null!=this.currentFilteredCount?this.currentFilteredCount:this.currentBaseCount},goToPage:function(e){this.currentOffset=parseInt(this.currentLimit)*(parseInt(e)-1);var t=ze(this.props.id+"-offset",this.currentOffset);window.history.pushState({matestackApp:!0,url:t},null,t),je.$emit(this.props.id+"-update")}},mounted:function(){null!=Ve(this.props.id+"-offset")?this.currentOffset=parseInt(Ve(this.props.id+"-offset")):null!=this.props.init_offset?this.currentOffset=this.props.init_offset:this.currentOffset=0,null!=Ve(this.props.id+"-limit")?this.currentOffset=parseInt(Ve(this.props.id+"-limit")):null!=this.props.init_limit?this.currentLimit=this.props.init_limit:this.currentLimit=10,null!=this.props.filtered_count&&(this.currentFilteredCount=this.props.filtered_count,this.currentOffset>=this.currentFilteredCount&&this.previous()),null!=this.props.base_count&&(this.currentBaseCount=this.props.base_count,this.currentOffset>=this.currentBaseCount&&this.previous())}},Be={methods:{successTransitionHandling:function(e){const t=this;if(null==t.props.success||null==t.props.success.transition||null!=t.props.success.transition.follow_response&&!1!==t.props.success.transition.follow_response||null==t.appNavigateTo)if(null==t.props.success||null==t.props.success.transition||!0!==t.props.success.transition.follow_response||null==t.appNavigateTo)if(null==t.props.success||null==t.props.success.redirect||null!=t.props.success.redirect.follow_response&&!1!==t.props.success.redirect.follow_response)if(null==t.props.success||null==t.props.success.redirect||!0!==t.props.success.redirect.follow_response);else{let t=e.data.redirect_to||e.request.responseURL;window.location.href=t}else{let e=t.props.success.redirect.path;window.location.href=e}else{let r=e.data.transition_to||e.request.responseURL;t.appNavigateTo({url:r,backwards:!1})}else{let e=t.props.success.transition.path;t.appNavigateTo({url:e,backwards:!1})}},failureTransitionHandling:function(e){const t=this;if(null==t.props.failure||null==t.props.failure.transition||null!=t.props.failure.transition.follow_response&&!1!==t.props.failure.transition.follow_response||null==t.appNavigateTo)if(null==t.props.failure||null==t.props.failure.transition||!0!==t.props.failure.transition.follow_response||null==t.appNavigateTo)if(null==t.props.failure||null==t.props.failure.redirect||null!=t.props.failure.redirect.follow_response&&!1!==t.props.failure.redirect.follow_response)if(null==t.props.failure||null==t.props.failure.redirect||!0!==t.props.failure.redirect.follow_response);else{let t=e.response.data.redirect_to||response.request.responseURL;window.location.href=t}else{let e=t.props.failure.redirect.path;window.location.href=e}else{let r=e.response.data.transition_to||response.request.responseURL;t.appNavigateTo({url:r,backwards:!1})}else{let e=t.props.failure.transition.path;t.appNavigateTo({url:e,backwards:!1})}}}},He={mixins:[Le,Be],template:Ae.inlineTemplate,data:function(){return{data:{},errors:{},loading:!1,isNestedForm:!1,nestedForms:{},nestedFormRuntimeTemplates:{},nestedFormRuntimeTemplateDomElements:{},deletedNestedForms:{}}},setup:()=>({appNavigateTo:t("appNavigateTo",void 0)}),provide:function(){return{parentFormUid:e((()=>this.props.component_uid)),parentFormData:e((()=>this.data)),parentFormErrors:e((()=>this.errors)),parentFormLoading:e((()=>this.loading)),parentNestedForms:e((()=>this.nestedForms)),parentDeletedNestedForms:e((()=>this.deletedNestedForms)),parentNestedFormRuntimeTemplates:e((()=>this.nestedFormRuntimeTemplates)),parentNestedFormRuntimeTemplateDomElements:e((()=>this.nestedFormRuntimeTemplateDomElements)),parentFormMapToNestedForms:this.mapToNestedForms,parentFormSetErrors:this.setErrors,parentFormResetErrors:this.resetErrors,parentFormIsNestedForm:this.isNestedForm,parentNestedFormRuntimeId:null}},methods:{initDataKey:function(e,t){this.data[e]=t},updateFormValue:function(e,t){this.data[e]=t},hasErrors:function(){for(var e in this.errors)if(null!==this.errors[e]&&""!=this.errors[e])return!0;return!1},resetErrors:function(e){this.errors[e]&&delete this.errors[e]},setErrors:function(e){this.errors=e},setErrorKey:function(e,t){this.errors[e]=t},flushErrors:function(e,t){this.errors={}},setNestedFormsError:function(e){let t=this;Object.keys(e).forEach((function(r){if(r.includes(".")){let n=r.split(".")[1],i=r.split(".")[0].split("[")[0],s=r.split(".")[0].split("[")[1].split("]")[0],o=t.mapToNestedForms(parseInt(s),i+"_attributes");t.nestedForms[i+"_attributes"][o].setNestedFormServerErrorIndex(parseInt(s)),t.nestedForms[i+"_attributes"][o].setErrorKey(n,e[r])}}))},mapToNestedForms:function(e,t){var r;r=null!=this.props.primary_key?this.props.primary_key:"id";for(var n=[],i=0;this.data[t].length>i;){1==this.data[t][i]._destroy&&null==this.data[t][i][r]||n.push(i),i++}return n[e]},resetNestedForms:function(){var e=this;Object.keys(e.nestedForms).forEach((function(t){e.nestedForms[t].forEach((function(e){if(1==e.data._destroy)var t=!0;e.initValues(),t&&(e.hideNestedForm=!0,e.data._destroy=!0)}))}))},initValues:function(){this.emitScopedEvent("init")},shouldResetFormOnSuccessfulSubmit(){const e=this;return null!=e.props.success&&null!=e.props.success.reset?e.props.success.reset:e.shouldResetFormOnSuccessfulSubmitByDefault()},shouldResetFormOnSuccessfulSubmitByDefault(){return"put"!=this.props.method},perform:function(){const e=this;null==e.props.fields_for&&(this.getRefs().form.checkValidity()?(e.loading=!0,null!=e.props.emit&&je.$emit(e.props.emit),null!=e.props.delay?setTimeout((function(){e.sendRequest()}),parseInt(e.props.delay)):e.sendRequest()):je.$emit("static_form_errors"))},transformToFormData:function(e,t,r=null){var n=this;for(let i in t)if(i.endsWith("[]"))for(let s in t[i]){let o=t[i][s];null!=r?e.append(n.props.for+r+"["+i.slice(0,-2)+"][]",o):e.append(n.props.for+"["+i.slice(0,-2)+"][]",o)}else Array.isArray(t[i])?t[i].forEach((function(t,s){if(null!=r){let s=r+"["+i+"][]";e=n.transformToFormData(e,t,s)}else{let r="["+i+"][]";e=n.transformToFormData(e,t,r)}})):null!=t[i]&&(null!=r?e.append(n.props.for+r+"["+i+"]",t[i]):e.append(n.props.for+"["+i+"]",t[i]));return e},sendRequest:function(){const e=this;let t={};t[e.props.for]=e.data;let r={};if(1==e.props.multipart){let t=new FormData;t=this.transformToFormData(t,this.data),r={method:e.props.method,url:e.props.submit_path,data:t,headers:{"X-CSRF-Token":e.getXcsrfToken(),"Content-Type":"multipart/form-data"}}}else r={method:e.props.method,url:e.props.submit_path,data:t,headers:{"X-CSRF-Token":e.getXcsrfToken(),"Content-Type":"application/json"}};Oe(r).then((function(t){e.loading=!1,null!=e.props.success&&null!=e.props.success.emit&&je.$emit(e.props.success.emit,t.data),e.successTransitionHandling(t),e.flushErrors(),e.shouldResetFormOnSuccessfulSubmit()&&(e.initValues(),e.resetNestedForms())})).catch((function(t){e.loading=!1,t.response&&t.response.data&&t.response.data.errors&&(e.errors=t.response.data.errors,e.setErrors(t.response.data.errors),e.setNestedFormsError(t.response.data.errors)),null!=e.props.failure&&null!=e.props.failure.emit&&je.$emit(e.props.failure.emit,t.response.data),e.failureTransitionHandling(t)}))}},mounted:function(){this.initValues()}},Je={mixins:[He],template:Ae.inlineTemplate,methods:{perform:function(){var e;for(var t in this.data,this.data)null!=this.data[t]&&(e=ze(this.props.id+"-filter-"+t,JSON.stringify(this.data[t]),e));e=ze(this.props.id+"-offset",0,e),window.history.pushState({matestackApp:!0,url:e},null,e),je.$emit(this.props.id+"-update")},resetFilter:function(){var e;for(var t in this.data)e=ze(this.props.id+"-filter-"+t,null,e),this.data[t]=null;this.initValues(),window.history.pushState({matestackApp:!0,url:e},null,e),je.$emit(this.props.id+"-update")}},created:function(){var e=this,t=qe();Object.keys(t).forEach((function(r){r.startsWith(e.props.id+"-filter-")&&(e.data[r.replace(e.props.id+"-filter-","")]=JSON.parse(t[r]))}))}},We={mixins:[Le],template:Ae.inlineTemplate,data:function(){return{ordering:{}}},methods:{toggleOrder:function(e){var t;null==this.ordering[e]?this.ordering[e]="asc":"asc"==this.ordering[e]?this.ordering[e]="desc":"desc"==this.ordering[e]&&(this.ordering[e]=void 0),t=ze(this.props.id+"-order-"+e,this.ordering[e]),t=ze(this.props.id+"-offset",0,t),window.history.pushState({matestackApp:!0,url:t},null,t),je.$emit(this.props.id+"-update"),this.$forceUpdate()},orderIndicator(e,t){return t[this.ordering[e]]}},created:function(){var e=this,t=qe();Object.keys(t).forEach((function(r){r.startsWith(e.props.id+"-order-")&&(e.ordering[r.replace(e.props.id+"-order-","")]=t[r])}))}},Xe={mixins:[Le],template:Ae.inlineTemplate,data:function(){return{showing:!0,hide_after_timeout:null,event:{data:{}}}},methods:{show:function(e){const t=this;!0!==this.showing&&(this.showing=!0,this.event.data=e,null!=this.props.hide_after&&(t.hide_after_timeout=setTimeout((function(){t.hide()}),parseInt(this.props.hide_after))))},hide:function(){this.showing=!1,this.event.data={}},setupToggling:function(){const e=this;null!=e.props.show_on&&(e.showing=!1,e.registerEvents(e.props.show_on,e.show)),null!=e.props.hide_on&&e.registerEvents(e.props.hide_on,e.hide)},setupInitialRender:function(){null!=this.props.show_on&&(this.showing=!1),1==this.props.init_show&&(this.showing=!0)}},created:function(){this.setupToggling(),this.setupInitialRender()},beforeUnmount:function(){const e=this;(clearTimeout(e.hide_after_timeout),je.$off(this.props.show_on,e.show),je.$off(this.props.hide_on,e.hide),null!=this.props.show_on)&&this.props.show_on.split(",").forEach((t=>je.$off(t.trim(),e.show)));null!=this.props.hide_on&&this.props.hide_on.split(",").forEach((t=>je.$off(t.trim(),e.hide)))}},Ke={mixins:[Le],template:Ae.inlineTemplate,data:function(){return{}},methods:{perform:function(){const e=this;e.emitEvents(e.props.emit,e.props.data)}}},Ge={mixins:[Le],template:Ae.inlineTemplate,data:function(){return{}},inject:["appNavigateTo","currentPathName","setPageLoading","pageLoading"],computed:{isActive(){return this.props.link_path.split("?")[0]===this.currentPathName},isChildActive(){return this.props.link_path.split("?")[0]!==this.currentPathName&&-1!==this.currentPathName.indexOf(this.props.link_path.split("?")[0])}},methods:{navigateTo:function(e){const t=this;je.$emit("page_loading_triggered",e),this.setPageLoading(!0),null!=t.props.delay?setTimeout((function(){t.performNavigation(e)}),parseInt(t.props.delay)):this.performNavigation(e)},performNavigation:function(e){this.appNavigateTo({url:e,backwards:!1})}}},Ze={mixins:[Le],template:Ae.inlineTemplate,data:function(){return{asyncTemplate:null,showing:!0,loading:!1,hideAfterTimeout:null,event:{data:{}}}},methods:{show:function(e){const t=this;!0!==this.showing&&(this.showing=!0,this.event.data=e,null!=this.props.defer&&(isNaN(this.props.defer)||this.startDefer()),null!=this.props.hide_after&&(t.hideAfterTimeout=setTimeout((function(){t.hide()}),parseInt(this.props.hide_after))))},hide:function(){this.showing=!1,this.event.data={}},startDefer:function(){const e=this;e.loading=!0,setTimeout((function(){e.rerender()}),parseInt(this.props.defer))},rerender:function(){var e=this;e.loading=!0,Oe({method:"get",url:location.pathname+location.search,headers:{"X-CSRF-Token":e.getXcsrfToken()},params:{component_key:e.props.component_key,component_class:e.props.parent_class}}).then((function(t){var r=document.createElement("div");r.innerHTML=t.data;var n=r.querySelector("#"+e.props.component_key).outerHTML;e.loading=!1,e.asyncTemplate=n})).catch((function(t){je.$emit("async_rerender_error",{id:e.props.component_key})}))}},created:function(){const e=this;e.registerEvents(this.props.show_on,e.show),e.registerEvents(this.props.hide_on,e.hide),e.registerEvents(this.props.rerender_on,e.rerender),null!=this.props.show_on&&(this.showing=!1),null!=this.props.defer&&(isNaN(this.props.defer)||null==this.props.show_on&&this.startDefer()),1==this.props.init_show&&(this.showing=!0)},beforeUnmount:function(){const e=this;clearTimeout(e.hideAfterTimeout),e.removeEvents(this.props.show_on,e.show),e.removeEvents(this.props.hide_on,e.hide),e.removeEvents(this.props.rerender_on,e.rerender)}},Qe={mixins:[Le,Be],template:Ae.inlineTemplate,data:function(){return{}},setup:()=>({appNavigateTo:t("appNavigateTo",void 0)}),methods:{perform:function(){const e=this;(null==e.props.confirm||confirm(e.props.confirm_text))&&(null!=e.props.emit&&je.$emit(e.props.emit),null!=e.props.delay?setTimeout((function(){e.sendRequest()}),parseInt(e.props.delay)):this.sendRequest())},sendRequest:function(){const e=this;Oe({method:e.props.method,url:e.props.action_path,data:e.props.data,headers:{"X-CSRF-Token":e.getXcsrfToken()}}).then((function(t){null!=e.props.success&&null!=e.props.success.emit&&je.$emit(e.props.success.emit,t.data),e.successTransitionHandling(t)})).catch((function(t){null!=e.props.failure&&null!=e.props.failure.emit&&je.$emit(e.props.failure.emit,t.response.data),e.failureTransitionHandling(t)}))}}},Ye={mixins:[Le],template:Ae.inlineTemplate,props:{initialTemplate:String},data:function(){return{cableTemplate:null,cableTemplateDomElement:null,loading:!1,event:{data:{}}}},methods:{append:function(e){var t=this.formatPayload(e);this.cableTemplateDomElement.insertAdjacentHTML("beforeend",t.join("")),this.updateCableTemplate()},prepend:function(e){var t=this.formatPayload(e);this.cableTemplateDomElement.insertAdjacentHTML("afterbegin",t.join("")),this.updateCableTemplate()},delete:function(e){this.formatPayload(e).forEach((e=>this.cableTemplateDomElement.querySelector("#"+e).remove())),this.updateCableTemplate()},update:function(e){const t=this;this.formatPayload(e).forEach((function(e){var r=document.createElement("div");r.innerHTML=e.replace(/^\s+|\s+$/g,"");var n=r.firstChild.id,i=t.cableTemplateDomElement.querySelector("#"+n);i.parentNode.replaceChild(r.firstChild,i)})),this.updateCableTemplate()},replace:function(e){var t=this.formatPayload(e);this.cableTemplateDomElement.innerHTML=t.join(""),this.updateCableTemplate()},updateCableTemplate:function(){this.cableTemplate=this.cableTemplateDomElement.outerHTML},formatPayload:function(e){return Array.isArray(e.data)?e.data:[e.data]}},mounted:function(){const e=this;var t=document.createElement("div");t.innerHTML=this.initialTemplate,this.cableTemplateDomElement=t.querySelector("#"+this.props.id),this.cableTemplate=this.cableTemplateDomElement.outerHTML,this.registerEvents(this.props.append_on,e.append),this.registerEvents(this.props.prepend_on,e.prepend),this.registerEvents(this.props.delete_on,e.delete),this.registerEvents(this.props.update_on,e.update),this.registerEvents(this.props.replace_on,e.replace)},beforeUnmount:function(){const e=this;this.cableTemplate=null,this.removeEvents(this.props.append_on,e.append),this.removeEvents(this.props.prepend_on,e.prepend),this.removeEvents(this.props.delete_on,e.delete),this.removeEvents(this.props.update_on,e.update),this.removeEvents(this.props.replace_on,e.replace)}},et={mixins:[Le],props:["props","params"],template:Ae.inlineTemplate,data:function(){return{isolatedTemplate:null,loading:!1,loadingError:!1}},methods:{rerender:function(){var e=this;e.loading=!0,e.loadingError=!1,null!=e.props.rerender_delay?setTimeout((function(){e.renderIsolatedContent()}),parseInt(this.props.rerender_delay)):e.renderIsolatedContent()},renderIsolatedContent:function(){var e=this;e.loading=!0,e.loadingError=!1,Oe({method:"get",url:location.pathname+location.search,headers:{"X-CSRF-Token":e.getXcsrfToken()},params:{component_class:e.props.component_class,public_options:e.props.public_options}}).then((function(t){e.loading=!1,e.loadingStart=!1,e.loadingEnd=!0,e.isolatedTemplate=t.data})).catch((function(t){e.loadingError=!0,je.$emit("isolate_rerender_error",{class:e.props.component_class})}))},startDefer:function(){const e=this;e.loading=!0,setTimeout((function(){e.renderIsolatedContent()}),parseInt(this.props.defer))}},created:function(){},beforeUnmount:function(){const e=this;null!=this.props.rerender_on&&this.props.rerender_on.split(",").forEach((t=>je.$off(t.trim(),e.renderIsolatedContent)))},mounted:function(){const e=this;void 0===this.props.init_on||null===this.props.init_on?(1==e.props.defer||Number.isInteger(e.props.defer))&&(isNaN(e.props.defer)?e.renderIsolatedContent():e.startDefer()):null!=e.props.defer?isNaN(e.props.defer)||this.props.init_on.split(",").forEach((t=>je.$on(t.trim(),e.startDefer))):this.props.init_on.split(",").forEach((t=>je.$on(t.trim(),e.renderIsolatedContent)));null!=this.props.rerender_on&&this.props.rerender_on.split(",").forEach((t=>je.$on(t.trim(),e.rerender)))}},tt={mixins:[Le],template:Ae.inlineTemplate,data:function(){return{data:{},errors:{},isNestedForm:!0,hideNestedForm:!1,nestedFormRuntimeId:"",nestedFormServerErrorIndex:""}},provide:function(){return{parentFormUid:e((()=>this.props.component_uid)),parentFormData:e((()=>this.data)),parentFormErrors:e((()=>this.errors)),parentNestedFormRuntimeId:e((()=>this.nestedFormRuntimeId)),parentFormMapToNestedForms:this.mapToNestedForms,parentFormSetErrors:this.setErrors,parentFormResetErrors:this.resetErrors}},inject:["parentFormData","parentFormErrors","parentNestedForms","parentDeletedNestedForms","parentFormMapToNestedForms"],methods:{initDataKey:function(e,t){this.data[e]=t},updateFormValue:function(e,t){this.data[e]=t},hasErrors:function(){for(var e in this.errors)if(null!==this.errors[e]&&""!=this.errors[e])return!0;return!1},resetErrors:function(e){this.errors[e]&&delete this.errors[e];var t=this.props.fields_for.replace("_attributes","")+"["+this.nestedFormServerErrorIndex+"]."+e;this.parentFormErrors[t]&&delete this.parentFormErrors[t]},setErrors:function(e){this.errors=e},setNestedFormServerErrorIndex:function(e){this.nestedFormServerErrorIndex=e},setErrorKey:function(e,t){this.errors[e]=t},flushErrors:function(e,t){this.errors={}},removeItem:function(){this.data._destroy=!0,this.hideNestedForm=!0;var e=parseInt(this.nestedFormRuntimeId.replace("_"+this.props.fields_for+"_child_",""));this.parentDeletedNestedForms[this.props.fields_for].push(e);var t=this.props.fields_for.replace("_attributes","")+"["+this.nestedFormServerErrorIndex+"].",r=this;Object.keys(r.parentFormErrors).forEach((function(e){0==e.lastIndexOf(t,0)&&delete r.parentFormErrors[e]}))},initValues:function(){this.emitScopedEvent("init")}},mounted:function(){var e=this;this.data={_destroy:!1},null==this.parentFormData[this.props.fields_for]&&(this.parentFormData[this.props.fields_for]=[]),null==this.parentNestedForms[this.props.fields_for]&&(this.parentNestedForms[this.props.fields_for]=[]),null==this.parentDeletedNestedForms[this.props.fields_for]&&(this.parentDeletedNestedForms[this.props.fields_for]=[]);var t=parseInt(e.getTemplateElement().querySelector(".matestack-form-fields-for").id.replace(this.props.fields_for+"_child_",""));isNaN(t)&&(t=this.parentNestedForms[this.props.fields_for].length,this.nestedFormRuntimeId="_"+this.props.fields_for+"_child_"+t,this.getTemplateElement().id=this.props.fields_for+"_child_"+t,this.initValues(),this.parentFormData[this.props.fields_for].push(this.data),this.parentNestedForms[this.props.fields_for].push(this)),isNaN(t)||(this.nestedFormRuntimeId="_"+this.props.fields_for+"_child_"+t,null==this.parentFormData[this.props.fields_for][t]?(this.initValues(),this.parentFormData[this.props.fields_for].push(this.data),this.parentNestedForms[this.props.fields_for].push(this)):(this.data=this.parentFormData[this.props.fields_for][t],1==this.data._destroy&&(this.hideNestedForm=!0),this.parentNestedForms[this.props.fields_for][t]=this,Object.keys(this.parentFormErrors).forEach((function(r){if(r.includes(".")){let n=r.split(".")[1],i=r.split(".")[0].split("[")[0],s=r.split(".")[0].split("[")[1].split("]")[0],o=e.parentFormMapToNestedForms(parseInt(s),i+"_attributes");i+"_attributes"==e.props.fields_for&&o==t&&(e.setNestedFormServerErrorIndex(parseInt(s)),e.setErrorKey(n,e.parentFormErrors[r]))}}))))}},rt={mixins:[Le],template:Ae.inlineTemplate,data:function(){return{}},inject:["parentNestedFormRuntimeTemplates","parentNestedFormRuntimeTemplateDomElements","parentNestedForms"],methods:{addItem:function(e){var t=JSON.parse(this.getTemplateElement().querySelector("#prototype-template-for-"+e).dataset[":template"]),r=t.matchAll(/&quot;component_uid&quot;:&quot;(.+?)&quot;/g),n=[];for(const e of r)n.push(e[1]);if(n.forEach((function(e){var r=Math.floor(1e9*Math.random());t=t.replaceAll(e,r)})),document.createElement("div").innerHTML=t,null==this.parentNestedFormRuntimeTemplateDomElements[e]){(i=document.createElement("div")).innerHTML=t,s=null==this.parentNestedForms[e]?0:this.parentNestedForms[e].length,i.querySelector(".matestack-form-fields-for").id=e+"_child_"+s,this.parentNestedFormRuntimeTemplateDomElements[e]=i,this.parentNestedFormRuntimeTemplates[e]=this.parentNestedFormRuntimeTemplateDomElements[e].outerHTML}else{var i;(i=document.createElement("div")).innerHTML=t;var s=this.parentNestedForms[e].length;i.querySelector(".matestack-form-fields-for").id=e+"_child_"+s,this.parentNestedFormRuntimeTemplateDomElements[e].insertAdjacentHTML("beforeend",i.innerHTML),this.parentNestedFormRuntimeTemplates[e]=this.parentNestedFormRuntimeTemplateDomElements[e].outerHTML}}}},nt={inject:["parentFormUid","parentFormData","parentFormErrors","parentFormLoading","parentFormIsNestedForm","parentFormResetErrors","parentNestedFormRuntimeId"],methods:{initialize:function(){const e=this;for(let t in e.getRefs()){let r,n;(t.startsWith("select.")||t.startsWith("input."))&&(r=e.getRefs()[t].attributes["init-value"],n=e.getRefs()[t].attributes["value-type"]),t.startsWith("select.")?t.startsWith("select.multiple.")?(e.parentFormData[t.replace("select.multiple.","")]=null,r?(e.setValue(JSON.parse(r.value)),e.afterInitialize(JSON.parse(r.value))):(e.setValue([]),e.afterInitialize([]))):(e.parentFormData[t.replace("select.","")]=null,r?n&&"Integer"==n.value?(e.setValue(parseInt(r.value)),e.afterInitialize(parseInt(r.value))):(e.setValue(r.value),e.afterInitialize(r.value)):(e.setValue(null),e.afterInitialize(null))):(e.parentFormData[t.replace("input.","")]=null,r?("true"===r.value&&(e.setValue(!0),e.afterInitialize(!0)),"false"===r.value&&(e.setValue(!1),e.afterInitialize(!1))):(e.setValue(null),e.afterInitialize(null)))}},inputChanged:function(e){this.parentFormIsNestedForm&&(this.parentFormData._destroy=!1),this.parentFormResetErrors(e)},afterInitialize:function(e){},setValue:function(e){this.parentFormData[this.props.key]=e}},mounted:function(){this.registerScopedEvent("init",this.initialize,this.parentFormUid)},beforeUnmount:function(){this.removeScopedEvent("init",this.initialize,this.parentFormUid)}},it={mixins:[Le,nt],template:Ae.inlineTemplate,data:()=>({})},st={inject:["parentFormUid","parentFormData","parentFormErrors","parentFormLoading","parentFormIsNestedForm","parentFormResetErrors","parentNestedFormRuntimeId"],methods:{initialize:function(){const e=this;for(let t in e.getRefs())if(t.startsWith("input.")){let r=e.getRefs()[t].attributes["init-value"];e.parentFormData[t.replace("input.","")]=null,r?(e.setValue(r.value),e.afterInitialize(r.value)):(e.setValue(null),e.afterInitialize(null))}},filesAdded:function(e){const t=(event.dataTransfer||event.target).files;if(event.target.attributes.multiple){this.parentFormData[e]=[];for(let r in t)t[r]instanceof File&&this.parentFormData[e].push(t[r])}else this.parentFormData[e]=t[0]},inputChanged:function(e){this.parentFormIsNestedForm&&(this.parentFormData._destroy=!1),this.parentFormResetErrors(e)},afterInitialize:function(e){},setValue:function(e){this.getRefs()["input."+this.props.key]&&(this.getRefs()["input."+this.props.key].value=e),this.getRefs()["input."+this.props.key+"[]"]&&(this.getRefs()["input."+this.props.key+"[]"].value=e),this.parentFormData[this.props.key]=e}},mounted:function(){this.registerScopedEvent("init",this.initialize,this.parentFormUid)},beforeUnmount:function(){this.removeScopedEvent("init",this.initialize,this.parentFormUid)}},ot={mixins:[Le,st],template:Ae.inlineTemplate,data:()=>({})},at={inject:["parentFormUid","parentFormData","parentFormErrors","parentFormLoading","parentFormIsNestedForm","parentFormResetErrors","parentNestedFormRuntimeId"],methods:{initialize:function(){const e=this;for(let t in e.getRefs()){let r,n;t.startsWith("select.")&&(r=e.getRefs()[t].attributes["init-value"],n=e.getRefs()[t].attributes["value-type"]),t.startsWith("select.")&&(t.startsWith("select.multiple.")?(e.parentFormData[t.replace("select.multiple.","")]=null,r?(e.setValue(JSON.parse(r.value)),e.afterInitialize(JSON.parse(r.value))):(e.setValue([]),e.afterInitialize([]))):(e.parentFormData[t.replace("select.","")]=null,r?n&&"Integer"==n.value?(e.setValue(parseInt(r.value)),e.afterInitialize(parseInt(r.value))):(e.setValue(r.value),e.afterInitialize(r.value)):(e.setValue(null),e.afterInitialize(null))))}},inputChanged:function(e){this.parentFormIsNestedForm&&(this.parentFormData._destroy=!1),this.parentFormResetErrors(e)},afterInitialize:function(e){},setValue:function(e){this.parentFormData[this.props.key]=e}},mounted:function(){this.registerScopedEvent("init",this.initialize,this.parentFormUid)},beforeUnmount:function(){this.removeScopedEvent("init",this.initialize,this.parentFormUid)}},pt={mixins:[Le,at],template:Ae.inlineTemplate,data:()=>({})},lt={inject:["parentFormUid","parentFormData","parentFormErrors","parentFormLoading","parentFormIsNestedForm","parentFormResetErrors","parentNestedFormRuntimeId"],methods:{initialize:function(){const e=this;for(let t in e.getRefs()){let r,n;t.startsWith("select.")&&(r=e.getRefs()[t].attributes["init-value"],n=e.getRefs()[t].attributes["value-type"]),t.startsWith("select.")&&(t.startsWith("select.multiple.")?(e.parentFormData[t.replace("select.multiple.","")]=null,r?(e.setValue(JSON.parse(r.value)),e.afterInitialize(JSON.parse(r.value))):(e.setValue([]),e.afterInitialize([]))):(e.parentFormData[t.replace("select.","")]=null,r?n&&"Integer"==n.value?(e.setValue(parseInt(r.value)),e.afterInitialize(parseInt(r.value))):(e.setValue(r.value),e.afterInitialize(r.value)):(e.setValue(null),e.afterInitialize(null))))}},inputChanged:function(e){this.parentFormIsNestedForm&&(this.parentFormData._destroy=!1),this.parentFormResetErrors(e)},afterInitialize:function(e){},setValue:function(e){this.parentFormData[this.props.key]=e}},mounted:function(){this.registerScopedEvent("init",this.initialize,this.parentFormUid)},beforeUnmount:function(){this.removeScopedEvent("init",this.initialize,this.parentFormUid)}},ut={mixins:[Le,lt],template:Ae.inlineTemplate,data:()=>({})},ct={inject:["parentFormUid","parentFormData","parentFormErrors","parentFormLoading","parentFormIsNestedForm","parentFormResetErrors","parentNestedFormRuntimeId"],methods:{initialize:function(){const e=this;for(let t in this.getRefs())if(t.startsWith("input.")){let r=e.getRefs()[t].attributes["init-value"];e.parentFormData[t.replace("input.","")]=null,r?(e.setValue(r.value),e.afterInitialize(r.value)):(e.setValue(null),e.afterInitialize(null))}},inputChanged:function(e){this.parentFormIsNestedForm&&(this.parentFormData._destroy=!1),this.parentFormResetErrors(e)},afterInitialize:function(e){},setValue:function(e){this.parentFormData[this.props.key]=e}},mounted:function(){this.registerScopedEvent("init",this.initialize,this.parentFormUid)},beforeUnmount:function(){this.removeScopedEvent("init",this.initialize,this.parentFormUid)}},dt={mixins:[Le,ct],template:Ae.inlineTemplate,data:()=>({})},mt=function(e){return e.config.compilerOptions.whitespace="preserve",e.config.compilerOptions.isCustomElement=e=>"matestack-component-template"===e,e.config.unwrapInjectedRef=!0,e.component("matestack-ui-core-runtime-render",Pe),e.component("matestack-ui-core-app",$e),e.component("matestack-ui-core-page-switch",Ue),e.component("matestack-ui-core-collection-content",Me),e.component("matestack-ui-core-collection-filter",Je),e.component("matestack-ui-core-collection-order",We),e.component("matestack-ui-core-toggle",Xe),e.component("matestack-ui-core-onclick",Ke),e.component("matestack-ui-core-transition",Ge),e.component("matestack-ui-core-async",Ze),e.component("matestack-ui-core-action",Qe),e.component("matestack-ui-core-cable",Ye),e.component("matestack-ui-core-isolate",et),e.component("matestack-ui-core-form",He),e.component("matestack-ui-core-form-checkbox",it),e.component("matestack-ui-core-form-input",ot),e.component("matestack-ui-core-form-radio",pt),e.component("matestack-ui-core-form-select",ut),e.component("matestack-ui-core-form-textarea",dt),e.component("matestack-ui-core-form-nested-form",tt),e.component("matestack-ui-core-form-fields-for-add-item",rt),e},ht={axios:Oe,eventHub:je,matestackEventHub:je,componentMixin:Le,componentHelpers:Ae,formInputMixin:st,formSelectMixin:lt,formCheckboxMixin:nt,formTextareaMixin:ct,formRadioMixin:at,registerComponents:mt,mount:function(e,t="#matestack-ui"){return 1!=window.matestackAppMounted&&(window.matestackAppMounted=!0,mt(e),e.mount(t)),e}};export{ht as default};
